<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Tutorial: Data Sources · Apache StreamPipes</title><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta name="generator" content="Docusaurus"/><meta name="description" content="In this tutorial, we will add a new data source consisting of a single data stream. The source will be provided as a standalone component (i.e., the description will be accessible through an integrated web server)."/><meta name="docsearch:version" content="0.70.0"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="Tutorial: Data Sources · Apache StreamPipes"/><meta property="og:type" content="website"/><meta property="og:url" content="https://streampipes.apache.org/docs/index.html"/><meta property="og:description" content="In this tutorial, we will add a new data source consisting of a single data stream. The source will be provided as a standalone component (i.e., the description will be accessible through an integrated web server)."/><meta property="og:image" content="https://streampipes.apache.org/docs/img/favicon.png"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://streampipes.apache.org/docs/img/docusaurus.png"/><link rel="shortcut icon" href="/docs/img/favicon.png"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/atom-one-dark.min.css"/><link rel="alternate" type="application/atom+xml" href="https://streampipes.apache.org/docs/blog/atom.xml" title="Apache StreamPipes Blog ATOM Feed"/><link rel="alternate" type="application/rss+xml" href="https://streampipes.apache.org/docs/blog/feed.xml" title="Apache StreamPipes Blog RSS Feed"/><link rel="stylesheet" href="/docs/css/slick.min.css"/><link rel="stylesheet" href="/docs/css/slick-theme.min.css"/><link rel="stylesheet" href="/docs/css/fonts.css"/><link rel="stylesheet" href="/docs/css/admonition.css"/><link rel="stylesheet" href="/docs/css/custom.css"/><link rel="stylesheet" href="/docs/css/code-block-buttons.css"/><link rel="stylesheet" href="/docs/css/all.min.css"/><script type="text/javascript" src="/docs/js/matomo.js"></script><script type="text/javascript" src="/docs/js/jquery-3.3.1.min.js"></script><script type="text/javascript" src="/docs/js/buttons.js"></script><script type="text/javascript" src="/docs/js/slick.min.js"></script><script type="text/javascript" src="/docs/js/custom.js"></script><script type="text/javascript" src="/docs/js/clipboard.min.js"></script><script type="text/javascript" src="/docs/js/code-block-buttons.js"></script><script src="https://unpkg.com/vanilla-back-to-top@7.1.14/dist/vanilla-back-to-top.min.js"></script><script>
        document.addEventListener('DOMContentLoaded', function() {
          addBackToTop(
            {"zIndex":100}
          )
        });
        </script><script src="/docs/js/scrollSpy.js"></script><link rel="stylesheet" href="/docs/css/prism.css"/><link rel="stylesheet" href="/docs/css/main.css"/><script src="/docs/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/docs/"><img class="logo" src="/docs/img/sp-logo-color-docs.png" alt="Apache StreamPipes"/></a><a href="/docs/versions.html"><h3>0.70.0</h3></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class=""><a href="/docs/docs/user-guide-introduction.html" target="_self">Documentation</a></li><li class=""><a href="/docs/docs/faq-common-problems.html" target="_self">FAQ</a></li><li class=""><a href="/docs/blog/" target="_self">Blog</a></li><li class="navSearchWrapper reactNavSearchWrapper"><input type="text" id="search_input_react" placeholder="Search" title="Search"/></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><div class="hamburger-menu"><div class="line1"></div><div class="line2"></div><div class="line3"></div></div></div><h2><i>›</i><span>Tutorials</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Basics<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/docs/dev-guide-introduction.html">Introduction</a></li><li class="navListItem"><a class="navItem" href="/docs/docs/dev-guide-architecture.html">Architecture</a></li><li class="navListItem"><a class="navItem" href="/docs/docs/dev-guide-development-environment.html">Development Environment</a></li><li class="navListItem"><a class="navItem" href="/docs/docs/dev-guide-archetype.html">Start Developing</a></li><li class="navListItem"><a class="navItem" href="/docs/docs/dev-guide-migration.html">Migration Guide</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Tutorials<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem navListItemActive"><a class="navItem" href="/docs/docs/dev-guide-tutorial-sources.html">Tutorial: Data Sources</a></li><li class="navListItem"><a class="navItem" href="/docs/docs/dev-guide-tutorial-processors.html">Tutorial: Data Processors</a></li><li class="navListItem"><a class="navItem" href="/docs/docs/dev-guide-tutorial-sinks.html">Tutorial: Data Sinks</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">SDK Reference<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/docs/dev-guide-sdk-guide-sources.html">SDK Guide Sources</a></li><li class="navListItem"><a class="navItem" href="/docs/docs/dev-guide-sdk-guide-processors.html">SDK Guide: Data Processors</a></li><li class="navListItem"><a class="navItem" href="/docs/docs/dev-guide-sdk-guide-sinks.html">SDK Guide: Data Sinks</a></li><li class="navListItem"><a class="navItem" href="/docs/docs/dev-guide-stream-requirements.html">Stream Requirements</a></li><li class="navListItem"><a class="navItem" href="/docs/docs/dev-guide-static-properties.html">Static Properties</a></li><li class="navListItem"><a class="navItem" href="/docs/docs/dev-guide-output-strategies.html">Output Strategies</a></li><li class="navListItem"><a class="navItem" href="/docs/docs/dev-guide-event-model.html">Event Model</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Configuration<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/docs/dev-guide-ssl.html">Use SSL</a></li><li class="navListItem"><a class="navItem" href="/docs/docs/dev-guide-configuration.html">Configuration</a></li></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              var headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                var el = event.target;
                while(el !== headings){
                  if (el.tagName === 'A') {
                    document.body.classList.remove('tocActive');
                    break;
                  } else{
                    el = el.parentNode;
                  }
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer docsContainer"><div class="wrapper"><div class="post"><header class="postHeader"><h1 id="__docusaurus" class="postHeaderTitle">Tutorial: Data Sources</h1></header><article><div><span><p>In this tutorial, we will add a new data source consisting of a single data stream. The source will be provided as a standalone component (i.e., the description will be accessible through an integrated web server).</p>
<h2><a class="anchor" aria-hidden="true" id="objective"></a><a href="#objective" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Objective</h2>
<p>We are going to create a new data stream that is produced by a GPS sensor installed in a delivery vehicle.
The sensor produces a continuous stream of events that contain the current timestamp, the current lat/lng position of the vehicle and the plate number of the vehicle.
Events are published in a JSON format as follows:</p>
<pre><code class="hljs css language-json">{
  <span class="hljs-attr">"timestamp"</span> : <span class="hljs-number">145838399</span>,
  <span class="hljs-attr">"latitude"</span> : <span class="hljs-number">37.04</span>,
  <span class="hljs-attr">"longitude"</span> : <span class="hljs-number">17.04</span>,
  <span class="hljs-attr">"plateNumber"</span> : <span class="hljs-string">"KA-AB 123"</span>
}
</code></pre>
<p>These events are published to a Kafka broker using the topic <code>org.streampipes.tutorial.vehicle</code>.</p>
<p>In the following section, we show how to describe this stream in a form that allows you to import and use it in StreamPipes.</p>
<h2><a class="anchor" aria-hidden="true" id="project-setup"></a><a href="#project-setup" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Project setup</h2>
<p>Instead of creating a new project from scratch, we recommend to use the Maven archetype to create a new project skeleton.
Enter the following command in a command line of your choice (Apache Maven needs to be installed):</p>
<pre><code class="hljs">mvn archetype:generate \
<span class="hljs-attribute">-DarchetypeGroupId</span>=org.streampipes <span class="hljs-attribute">-DarchetypeArtifactId</span>=streampipes-archetype-pe-sources \
<span class="hljs-attribute">-DarchetypeVersion</span>=0.65.0 <span class="hljs-attribute">-DgroupId</span>=my.groupId \
<span class="hljs-attribute">-DartifactId</span>=my-source <span class="hljs-attribute">-DclassNamePrefix</span>=MySource <span class="hljs-attribute">-DpackageName</span>=mypackagename
</code></pre>
<p>Configure the variables <code>artifactId</code> (which will be the Maven artifactId), <code>classNamePrefix</code> (which will be the class name of your data stream) and <code>packageName</code>.</p>
<p>For this tutorial, use <code>Vehicle</code> as <code>classNamePrefix</code>.</p>
<p>Your project will look as follows:</p>
<p><img src="/docs/img/tutorial-sources/project-structure.PNG" alt="Project Structure"></p>
<p>That's it, go to the next section to learn how to create your first data stream!</p>
<div class="admonition tip">
<div class="admonition-title">Tip</div>
<p>Besides the basic project skeleton, the sample project also includes an example Dockerfile you can use to package your application into a Docker container.
</p>
</div>
<h2><a class="anchor" aria-hidden="true" id="adding-a-data-stream-description"></a><a href="#adding-a-data-stream-description" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Adding a data stream description</h2>
<p>Now we will add a new data stream definition.
First, open the class <code>VehicleStream</code> which should look as follows:</p>
<pre><code class="hljs css language-java">
<span class="hljs-keyword">package</span> my.groupId.pe.mypackagename;

<span class="hljs-keyword">import</span> org.streampipes.model.SpDataStream;
<span class="hljs-keyword">import</span> org.streampipes.model.graph.DataSourceDescription;
<span class="hljs-keyword">import</span> org.streampipes.sdk.builder.DataStreamBuilder;
<span class="hljs-keyword">import</span> org.streampipes.sdk.helpers.EpProperties;
<span class="hljs-keyword">import</span> org.streampipes.sdk.helpers.Formats;
<span class="hljs-keyword">import</span> org.streampipes.sdk.helpers.Protocols;
<span class="hljs-keyword">import</span> org.streampipes.sources.AbstractAdapterIncludedStream;


<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MySourceStream</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">AbstractAdapterIncludedStream</span> </span>{

  <span class="hljs-meta">@Override</span>
  <span class="hljs-function"><span class="hljs-keyword">public</span> SpDataStream <span class="hljs-title">declareModel</span><span class="hljs-params">(DataSourceDescription sep)</span> </span>{
    <span class="hljs-keyword">return</span> DataStreamBuilder.create(<span class="hljs-string">"my.groupId-mypackagename"</span>, <span class="hljs-string">"MySource"</span>, <span class="hljs-string">""</span>)
            .property(EpProperties.timestampProperty(<span class="hljs-string">"timestamp"</span>))

            <span class="hljs-comment">// configure your stream here</span>

            .format(Formats.jsonFormat())
            .protocol(Protocols.kafka(<span class="hljs-string">"localhost"</span>, <span class="hljs-number">9092</span>, <span class="hljs-string">"TOPIC_SHOULD_BE_CHANGED"</span>))
            .build();
  }

  <span class="hljs-meta">@Override</span>
  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">executeStream</span><span class="hljs-params">()</span> </span>{

  }
}
</code></pre>
<p>This class extends the class <code>AbstractAdapterIncludedStream</code>, which indicates that this source continuously produces data (configured in the <code>executeStream()</code> method.
In contrast, the class <code>AbstractAlreadyExistingStream</code> indicates that we only want to describe an already existing stream (e.g., a stream that already sends data to an existing Kafka broker).</p>
<p>Next, we will add the definition of the data stream. Add the following code inside of the <code>declareModel</code> method:</p>
<pre><code class="hljs css language-java"><span class="hljs-keyword">return</span> DataStreamBuilder.create(<span class="hljs-string">"org.streampipes.tutorial.vehicle.position"</span>, <span class="hljs-string">"Vehicle Position"</span>, <span class="hljs-string">"An event stream "</span> +
          <span class="hljs-string">"that produces current vehicle positions"</span>)
</code></pre>
<p>This line creates a new instance of the SDK's <code>DataStreamBuilder</code> by providing three basic parameters:
The first parameter must be a unique identifier of your data stream.
The second and third parameters indicate a label and a description of your stream.
These values will later be used in the StreamPipes UI to display stream details in a human-readable manner.</p>
<p>Next, we will add the properties as stated above to the stream definition by adding the following lines:</p>
<pre><code class="hljs css language-java">.property(EpProperties.timestampProperty(<span class="hljs-string">"timestamp"</span>))
.property(EpProperties.stringEp(Labels.from(<span class="hljs-string">"plate-number"</span>, <span class="hljs-string">"Plate Number"</span>, <span class="hljs-string">"Denotes the plate number of the vehicle"</span>), <span class="hljs-string">"plateNumber"</span>, <span class="hljs-string">"http://my.company/plateNumber"</span>))
.property(EpProperties.doubleEp(Labels.from(<span class="hljs-string">"latitude"</span>, <span class="hljs-string">"Latitude"</span>, <span class="hljs-string">"Denotes the latitude value of the vehicle's position"</span>), <span class="hljs-string">"latitude"</span>, Geo.lat))
.property(EpProperties.doubleEp(Labels.from(<span class="hljs-string">"longitude"</span>, <span class="hljs-string">"Longitude"</span>, <span class="hljs-string">"Denotes the longitude value of the vehicle's position"</span>), <span class="hljs-string">"longitude"</span>, Geo.lng))
</code></pre>
<p>These four <em>event properties</em> compose our <em>event schema</em>. An event property must, at least, provide the following attributes:</p>
<ul>
<li><strong>Runtime Name</strong>. The runtime name indicates the key of the property at runtime, e.g., if our JSON message contains a structure such as <code>{&quot;plateNumber&quot; : &quot;KA-F 123&quot;}</code>, the runtime name must be <code>plateNumber</code>.</li>
<li><strong>Runtime Type</strong>. An event property must have a primitive type (we will later see how to model more complex properties such as lists and nested properties).
The type must be an instance of <code>XMLSchema</code> primitives, however, the SDK provides convenience methods to provide the property type.</li>
<li><strong>Domain Property</strong>. The domain property indicates the semantics of the event property. For instance, the <code>latitude</code> property is linked to the <code>http://www.w3.org/2003/01/geo/wgs84_pos#lat</code> property of the WGS84 vocabulary.
The domain property should be an URI as part of an existing or domain-specific vocabulary. The SDK provides convenience methods for popuplar vocabularies (e.g., Schema.org, Dolce or WGS84).</li>
</ul>
<p>In order to complete the minimum required specification of an event stream, we need to provide information on the transport format and protocol of the data stream at runtime.</p>
<p>This can be achieved by extending the builder with the respective properties (which should already have been auto-generated):</p>
<pre><code class="hljs css language-java">.format(Formats.jsonFormat())
.protocol(Protocols.kafka(<span class="hljs-string">"localhost"</span>, <span class="hljs-number">9092</span>, <span class="hljs-string">"TOPIC_SHOULD_BE_CHANGED"</span>))
.build();
</code></pre>
<p>Set <code>org.streampipes.tutorial.vehicle</code> as your new topic by replacing the term ``TOPIC_SHOULD_BE_CHANGED`.</p>
<p>In this example, we defined that the data stream consists of events in a JSON format and that Kafka is used as a message broker to transmit events.
The last build() method call triggers the construction of the RDF-based data stream definition.</p>
<p>That's it! In the next section, we will connect the data stream to a source and inspect the generated RDF description.</p>
<h2><a class="anchor" aria-hidden="true" id="creating-some-dummy-data"></a><a href="#creating-some-dummy-data" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Creating some dummy data</h2>
<p>Let's assume our stream should produce some random values that are sent to StreamPipes. We'll add a very simple data simulator to the <code>executeStream</code> method as follows:</p>
<pre><code class="hljs css language-java"><span class="hljs-meta">@Override</span>
  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">executeStream</span><span class="hljs-params">()</span> </span>{

    SpKafkaProducer producer = <span class="hljs-keyword">new</span> SpKafkaProducer(<span class="hljs-string">"localhost:9092"</span>, <span class="hljs-string">"TOPIC_SHOULD_BE_CHANGED"</span>);
    Random random = <span class="hljs-keyword">new</span> Random();
    Runnable runnable = <span class="hljs-keyword">new</span> Runnable() {
      <span class="hljs-meta">@Override</span>
      <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">run</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">for</span> (;;) {
          JsonObject jsonObject = <span class="hljs-keyword">new</span> JsonObject();
          jsonObject.addProperty(<span class="hljs-string">"timestamp"</span>, System.currentTimeMillis());
          jsonObject.addProperty(<span class="hljs-string">"plateNumber"</span>, <span class="hljs-string">"KA-FZ 1"</span>);
          jsonObject.addProperty(<span class="hljs-string">"latitude"</span>, random.nextDouble());
          jsonObject.addProperty(<span class="hljs-string">"longitude"</span>, random.nextDouble());

          producer.publish(jsonObject.toString());

          <span class="hljs-keyword">try</span> {
            Thread.sleep(<span class="hljs-number">1000</span>);
          } <span class="hljs-keyword">catch</span> (InterruptedException e) {
            e.printStackTrace();
          }

        }
      }
    };

    <span class="hljs-keyword">new</span> Thread(runnable).start();
  }
</code></pre>
<p>Change the topic and the URL of your Kafka broker (as stated in the controller).</p>
<h2><a class="anchor" aria-hidden="true" id="adding-a-source-description"></a><a href="#adding-a-source-description" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Adding a source description</h2>
<p>A data source can be seen like a container for a set of data streams. Usually, a data source includes events that are logically or physically connected.
For instance, in our example we would add other streams produced by vehicle sensors (such as fuel consumption) to the same data source description.</p>
<p>Open the class <code>DataSource</code> which should look as follows:</p>
<pre><code class="hljs css language-java">
<span class="hljs-keyword">package</span> my.groupId.pe.mypackagename;

<span class="hljs-keyword">import</span> org.streampipes.container.declarer.DataStreamDeclarer;
<span class="hljs-keyword">import</span> org.streampipes.container.declarer.SemanticEventProducerDeclarer;
<span class="hljs-keyword">import</span> org.streampipes.model.graph.DataSourceDescription;
<span class="hljs-keyword">import</span> org.streampipes.sdk.builder.DataSourceBuilder;

<span class="hljs-keyword">import</span> java.util.Arrays;
<span class="hljs-keyword">import</span> java.util.List;


<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">DataSource</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">SemanticEventProducerDeclarer</span> </span>{

  <span class="hljs-function"><span class="hljs-keyword">public</span> DataSourceDescription <span class="hljs-title">declareModel</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-keyword">return</span> DataSourceBuilder.create(<span class="hljs-string">"my.groupId.mypackagename.source"</span>, <span class="hljs-string">"MySource "</span> +
        <span class="hljs-string">"Source"</span>, <span class="hljs-string">""</span>)
            .build();
  }

  <span class="hljs-function"><span class="hljs-keyword">public</span> List&lt;DataStreamDeclarer&gt; <span class="hljs-title">getEventStreams</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-keyword">return</span> Arrays.asList(<span class="hljs-keyword">new</span> MySourceStream());
  }
}
</code></pre>
<p>First, we need to define the source. Similar to data streams, a source consists of an id, a human-readable name and a description.
Replace the content defined in the <code>declareModel</code> method with the following code:</p>
<pre><code class="hljs css language-java"><span class="hljs-keyword">return</span> DataSourceBuilder.create(<span class="hljs-string">"org.streampipes.tutorial.source.vehicle"</span>, <span class="hljs-string">"Vehicle Source"</span>, <span class="hljs-string">"A data source that "</span> +
    <span class="hljs-string">"holds event streams produced by vehicles."</span>)
    .build();
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="preparing-the-container"></a><a href="#preparing-the-container" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Preparing the container</h2>
<p>The final step is to define the deployment type of our new data source. In this tutorial, we will create a so-called <code>StandaloneModelSubmitter</code>.
This client will start an embedded web server that provides the description of our data source.</p>
<p>Go to the class <code>Init</code> that implements <code>StandaloneModelSubmitter</code>, which should look as follows:</p>
<pre><code class="hljs css language-java"><span class="hljs-keyword">package</span> my.groupId.main;

<span class="hljs-keyword">import</span> org.streampipes.container.init.DeclarersSingleton;
<span class="hljs-keyword">import</span> org.streampipes.container.standalone.init.StandaloneModelSubmitter;
<span class="hljs-keyword">import</span> my.groupId.config.Config;
<span class="hljs-keyword">import</span> my.groupId.pe.mypackagename.DataSource;

<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Init</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">StandaloneModelSubmitter</span> </span>{

  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> Exception </span>{
    DeclarersSingleton.getInstance()
            .add(<span class="hljs-keyword">new</span> DataSource());

    <span class="hljs-keyword">new</span> Init().init(Config.INSTANCE);

  }
}
</code></pre>
<p>This code adds the <code>VehicleSource</code>. Finally, the <code>init</code> method is called
which triggers the generation of the corresponding RDF description and startup of the web server.</p>
<div class="admonition info">
<div class="admonition-title">Info</div>
<p>In the example above, we make use of a class `Config`.
       This class contains both mandatory and additional configuration parameters required by a pipeline element container.
       These values are stored in the Consul-based key-value store of your StreamPipes installation.
       The SDK guide contains a detailed manual on managing container configurations.</p>
</div>
<h2><a class="anchor" aria-hidden="true" id="starting-the-container"></a><a href="#starting-the-container" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Starting the container</h2>
<div class="admonition tip">
<div class="admonition-title">Tip</div>
<p>By default, the container registers itself using the hostname later used by the Docker container, leading to a 404 error when you try to access an RDF description.
       For local development, we provide an environment file in the ``development`` folder. You can add your hostname here, which will override settings from the Config class.
       For instance, use the IntelliJ ``EnvFile`` plugin to automatically provide the environment variables upon start.
</p>
</div>
<p>Now we are ready to start our first container!</p>
<p>Execute the main method in the class <code>Main</code> we've just created, open a web browser and navigate to <a href="http://localhost:8090">http://localhost:8090</a>, or change the port according to the value of the <code>SP_PORT</code> variable in the env file.</p>
<p>You should see something as follows:</p>
<p><img src="/docs/img/tutorial-sources/pe-overview.PNG" alt="Pipeline Element Container Overview"></p>
<p>Click on the link of the data source to see the RDF description of the pipeline element.</p>
<p><img src="/docs/img/tutorial-sources/pe-rdf.PNG" alt="Pipeline Element RDF description"></p>
<p>The container automatically registers itself in the Consul installation of StreamPipes.
To install the just created element, open the StreamPipes UI and follow the manual provided in the <a href="user-guide-introduction">user guide</a>.</p>
<h2><a class="anchor" aria-hidden="true" id="read-more"></a><a href="#read-more" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Read more</h2>
<p>Congratulations! You've just created your first pipeline element for StreamPipes.
There are many more things to explore and data sources can be defined in much more detail.
Follow our <a href="dev-guide-source-sdk">SDK guide</a> to see what's possible!</p>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="/docs/docs/dev-guide-migration.html"><span class="arrow-prev">← </span><span>Migration Guide</span></a><a class="docs-next button" href="/docs/docs/dev-guide-tutorial-processors.html"><span>dev-guide-tutorial-processors</span><span class="arrow-next"> →</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#objective">Objective</a></li><li><a href="#project-setup">Project setup</a></li><li><a href="#adding-a-data-stream-description">Adding a data stream description</a></li><li><a href="#creating-some-dummy-data">Creating some dummy data</a></li><li><a href="#adding-a-source-description">Adding a source description</a></li><li><a href="#preparing-the-container">Preparing the container</a></li><li><a href="#starting-the-container">Starting the container</a></li><li><a href="#read-more">Read more</a></li></ul></nav></div><div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/docs/" class="nav-home"><img src="/docs/img/sp-logo-color.png" alt="Apache StreamPipes" width="66"/></a><div><h5>Docs</h5><a href="/docs/docs/user-guide-introduction">User Guide</a><a href="/docs/docs/dev-guide-introduction">Developer Guide</a><a href="/docs/docs/faq-common-problems">Frequently Asked Questions</a></div><div><h5>Community</h5><a href="http://stackoverflow.com/questions/tagged/streampipes" target="_blank" rel="noreferrer noopener">Stack Overflow</a><a href="https://twitter.com/streampipes" target="_blank" rel="noreferrer noopener">Twitter</a><a href="https://github.com/apache/streampipes" target="_blank" rel="noreferrer noopener">Github</a><a href="https://hub.docker.com/u/streampipes" target="_blank" rel="noreferrer noopener">Docker Hub</a></div><div><h5>More</h5><a href="/docs/blog">Blog</a><a href="https://streampipes.apache.org">Website</a><a href="https://www.apache.org/foundation/policies/privacy.html">Privacy</a><a class="github-button" href="https://github.com/apache/streampipes" data-icon="octicon-star" data-count-href="/streampipes/streampipes/stargazers" data-show-count="true" data-count-aria-label="# stargazers on GitHub" aria-label="Star this project on GitHub">Star</a></div></section><section class="copyright">Copyright © 2019 - 2023 The Apache Software Foundation<p style="margin-bottom:0px;margin-left:20px;margin-right:20px;text-align:center">Apache and the Apache feather logo are trademarks of The Apache Software Foundation.</p></section></footer></div></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>
                document.addEventListener('keyup', function(e) {
                  if (e.target !== document.body) {
                    return;
                  }
                  // keyCode for '/' (slash)
                  if (e.keyCode === 191) {
                    const search = document.getElementById('search_input_react');
                    search && search.focus();
                  }
                });
              </script><script>
              var search = docsearch({
                
                apiKey: '0fedc89dddf2810657708b178e56ef02',
                indexName: 'streampipes',
                inputSelector: '#search_input_react',
                algoliaOptions: {}
              });
            </script></body></html>