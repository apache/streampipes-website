"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[64447],{3905:(e,t,n)=>{n.d(t,{Zo:()=>d,kt:()=>g});var i=n(67294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,i,a=function(e,t){if(null==e)return{};var n,i,a={},r=Object.keys(e);for(i=0;i<r.length;i++)n=r[i],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(i=0;i<r.length;i++)n=r[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var l=i.createContext({}),p=function(e){var t=i.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},d=function(e){var t=p(e.components);return i.createElement(l.Provider,{value:t},e.children)},c="mdxType",m={inlineCode:"code",wrapper:function(e){var t=e.children;return i.createElement(i.Fragment,{},t)}},u=i.forwardRef((function(e,t){var n=e.components,a=e.mdxType,r=e.originalType,l=e.parentName,d=s(e,["components","mdxType","originalType","parentName"]),c=p(n),u=a,g=c["".concat(l,".").concat(u)]||c[u]||m[u]||r;return n?i.createElement(g,o(o({ref:t},d),{},{components:n})):i.createElement(g,o({ref:t},d))}));function g(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var r=n.length,o=new Array(r);o[0]=u;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[c]="string"==typeof e?e:a,o[1]=s;for(var p=2;p<r;p++)o[p]=n[p];return i.createElement.apply(null,o)}return i.createElement.apply(null,n)}u.displayName="MDXCreateElement"},61352:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>d,contentTitle:()=>l,default:()=>g,frontMatter:()=>s,metadata:()=>p,toc:()=>c});var i=n(87462),a=n(63366),r=(n(67294),n(3905)),o=["components"],s={title:"From Sensor to Insight - Rapid IIoT Integration for IO-Link Devices with Apache StreamPipes",author:"Philipp Zehnder",authorURL:"https://github.com/tenthe",authorImageURL:"/img/zehnder.png"},l="From Sensor to Insight: Rapid IIoT Integration for IO-Link Devices with Apache StreamPipes",p={permalink:"/blog/2025/06/11/oi4-adapter",source:"@site/blog/2025-06-11-oi4-adapter.md",title:"From Sensor to Insight - Rapid IIoT Integration for IO-Link Devices with Apache StreamPipes",description:"Integrating industrial sensors into IIoT architectures often poses significant challenges\u2014especially for IT teams unfamiliar with traditional operational technologies (OT).",date:"2025-06-11T00:00:00.000Z",formattedDate:"June 11, 2025",tags:[],readingTime:6.21,hasTruncateMarker:!0,authors:[{name:"Philipp Zehnder",url:"https://github.com/tenthe",imageURL:"/img/zehnder.png"}],frontMatter:{title:"From Sensor to Insight - Rapid IIoT Integration for IO-Link Devices with Apache StreamPipes",author:"Philipp Zehnder",authorURL:"https://github.com/tenthe",authorImageURL:"/img/zehnder.png"},prevItem:{title:"Apache StreamPipes release 0.98.0",permalink:"/blog/2025/12/15/_release-098"},nextItem:{title:"Secure OPC-UA Integration with Apache StreamPipes: A Comprehensive Guide",permalink:"/blog/2025/05/20/opc-ua-certificates"}},d={authorsImageUrls:[void 0]},c=[{value:"Why Choose IO-Link Sensors?",id:"why-choose-io-link-sensors",level:2},{value:"Benefits of IO-Link for IIoT",id:"benefits-of-io-link-for-iiot",level:3},{value:"What is IO-Link?",id:"what-is-io-link",level:3},{value:"OI4: The Key to MQTT-Based IO-Link Integration",id:"oi4-the-key-to-mqtt-based-io-link-integration",level:3},{value:"Use Case: Multi-Sensor Condition Monitoring",id:"use-case-multi-sensor-condition-monitoring",level:2},{value:"Real-Time Insights with StreamPipes",id:"real-time-insights-with-streampipes",level:3},{value:"Expanding Beyond Vibration",id:"expanding-beyond-vibration",level:3},{value:"Integration Overview: From Hardware to StreamPipes",id:"integration-overview-from-hardware-to-streampipes",level:2},{value:"StreamPipes Configuration Guide",id:"streampipes-configuration-guide",level:2},{value:"Adding the OI4 Adapter",id:"adding-the-oi4-adapter",level:3},{value:"Configuring the Adapter",id:"configuring-the-adapter",level:3},{value:"Deep Dive: VVB001 Vibration Sensor Data",id:"deep-dive-vvb001-vibration-sensor-data",level:2},{value:"Key Metrics Explained",id:"key-metrics-explained",level:3},{value:"Sample JSON Payload",id:"sample-json-payload",level:3},{value:"Preprocessing in StreamPipes",id:"preprocessing-in-streampipes",level:3},{value:"Visual Data Exploration",id:"visual-data-exploration",level:2},{value:"Alerting with Pipelines",id:"alerting-with-pipelines",level:2},{value:"Conclusion",id:"conclusion",level:2}],m={toc:c},u="wrapper";function g(e){var t=e.components,n=(0,a.Z)(e,o);return(0,r.kt)(u,(0,i.Z)({},m,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"Integrating industrial sensors into IIoT architectures often poses significant challenges\u2014especially for IT teams unfamiliar with traditional operational technologies (OT).\nThe complexity of fieldbus protocols, bespoke integrations, and vendor lock-in can create significant barriers to digital transformation on the shop floor."),(0,r.kt)("p",null,"This blog post introduces an easy, scalable approach to bridging this IT/OT divide using ",(0,r.kt)("strong",{parentName:"p"},"IO-Link"),", a standardized protocol for industrial sensors, and ",(0,r.kt)("strong",{parentName:"p"},"Apache StreamPipes"),".\nWe'll walk you through a complete setup\u2014from connecting IO-Link sensors to visualizing actionable insights\u2014with a focus on a ",(0,r.kt)("strong",{parentName:"p"},"vibration sensor")," and an ",(0,r.kt)("strong",{parentName:"p"},"IO-Link Master"),"."),(0,r.kt)("p",null,"Whether you're building condition monitoring systems, predictive maintenance pipelines, or just starting with industrial data analytics, this guide will show how StreamPipes makes it simple to move from raw sensor data to intelligent decisions."),(0,r.kt)("img",{src:"/img/blog/2025-06-11/01-IO-Link-Sensor.png",alt:"Image of IO-Link master and VVB001 sensor",style:{width:"50%",display:"block",margin:"0 auto"}}),(0,r.kt)("h2",{id:"why-choose-io-link-sensors"},"Why Choose IO-Link Sensors?"),(0,r.kt)("p",null,"IO-Link is an increasingly popular choice in modern industrial environments\u2014and for good reason.\nIt enables seamless sensor integration without the headaches of proprietary protocols or specialized wiring."),(0,r.kt)("h3",{id:"benefits-of-io-link-for-iiot"},"Benefits of IO-Link for IIoT"),(0,r.kt)("p",null,"IO-Link sensors support a wide range of measurements including vibration, temperature, flow, and pressure.\nThanks to IODD (IO Device Description) files, these sensors are interoperable across manufacturers, making configuration fast and reliable.\nWith simple three-wire cabling and support for up to eight sensors via a single IO-Link master, IO-Link dramatically reduces the complexity of sensor installations."),(0,r.kt)("h3",{id:"what-is-io-link"},"What is IO-Link?"),(0,r.kt)("p",null,"IO-Link is a globally standardized communication protocol (IEC 61131-9) used to connect industrial sensors and actuators.\nUnlike traditional analog or proprietary fieldbus protocols, IO-Link communicates digitally and supports detailed sensor diagnostics, parameterization, and status monitoring.\nIt also integrates easily into IT environments, helping to close the gap between OT data generation and IT-driven analytics."),(0,r.kt)("h3",{id:"oi4-the-key-to-mqtt-based-io-link-integration"},"OI4: The Key to MQTT-Based IO-Link Integration"),(0,r.kt)("p",null,"To simplify integration with modern IoT platforms, the ",(0,r.kt)("strong",{parentName:"p"},"Open Industry 4.0 Alliance (OI4)")," provides a standardized interface specification for IO-Link over MQTT.\nThis includes well-defined JSON structures, topic hierarchies, and security mechanisms such as TLS encryption and authentication.\nOI4-compliant devices ensure that sensor data can be consumed and interpreted reliably\u2014no matter the vendor."),(0,r.kt)("h2",{id:"use-case-multi-sensor-condition-monitoring"},"Use Case: Multi-Sensor Condition Monitoring"),(0,r.kt)("p",null,"Let\u2019s consider a typical industrial use case: monitoring the condition of electric motors using vibration, temperature, and pressure sensors.\nThese sensors are connected to a ",(0,r.kt)("strong",{parentName:"p"},"Hilscher sensorEDGE FIELD")," gateway, which publishes all sensor values over MQTT using the OI4 format."),(0,r.kt)("h3",{id:"real-time-insights-with-streampipes"},"Real-Time Insights with StreamPipes"),(0,r.kt)("p",null,"In Apache StreamPipes, this data can be ingested using the OI4 adapter and routed through various processing pipelines.\nFor instance, you can configure alerts for high vibration (e.g., ",(0,r.kt)("inlineCode",{parentName:"p"},"aPeak > 8.0 m/s\xb2"),") and high temperature (",(0,r.kt)("inlineCode",{parentName:"p"},"> 80\xb0C"),") to detect early signs of mechanical stress or overheating.\nAdditionally, a rolling average calculation on pressure data helps identify leaks or irregularities."),(0,r.kt)("p",null,"This setup not only enables instant notifications via email but also stores the processed data in a timeseries database for long-term trend analysis\u2014reducing the need for manual inspections and improving asset reliability."),(0,r.kt)("h3",{id:"expanding-beyond-vibration"},"Expanding Beyond Vibration"),(0,r.kt)("p",null,"IO-Link sensors can be used across many other domains in industrial environments. Here are a few examples:"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Sensor Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Use Case"),(0,r.kt)("th",{parentName:"tr",align:null},"StreamPipes Processor(s)"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Flow"),(0,r.kt)("td",{parentName:"tr",align:null},"Detect pipe blockages in real-time"),(0,r.kt)("td",{parentName:"tr",align:null},"Threshold Alert, Rate of Change")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Distance"),(0,r.kt)("td",{parentName:"tr",align:null},"Monitor silo fill levels"),(0,r.kt)("td",{parentName:"tr",align:null},"Moving Average, Anomaly Detection")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Pressure"),(0,r.kt)("td",{parentName:"tr",align:null},"Predict pump failure from pressure spikes"),(0,r.kt)("td",{parentName:"tr",align:null},"Pattern Matching")))),(0,r.kt)("h2",{id:"integration-overview-from-hardware-to-streampipes"},"Integration Overview: From Hardware to StreamPipes"),(0,r.kt)("p",null,"Setting up the hardware and data flow is straightforward\u2014even for teams without OT experience."),(0,r.kt)("p",null,"After connecting the ",(0,r.kt)("strong",{parentName:"p"},"VVB001 vibration sensor")," to an IO-Link Master, it is automatically detected and begins sending data.\nThis gateway then publishes sensor readings to a local or remote MQTT broker in a structured JSON format, following the OI4 specification."),(0,r.kt)("p",null,"Apache StreamPipes, with its OI4 adapter, subscribes to these MQTT topics, automatically infers the data schema, and prepares the events for downstream processing\u2014completely eliminating the need for manual parsing or custom integration scripts."),(0,r.kt)("img",{src:"/img/blog/2025-06-11/02-Architecture-Overview.png",alt:"Architectural overview"}),(0,r.kt)("h2",{id:"streampipes-configuration-guide"},"StreamPipes Configuration Guide"),(0,r.kt)("p",null,"Setting up the data stream in StreamPipes is quick and intuitive. Here's how it works:"),(0,r.kt)("h3",{id:"adding-the-oi4-adapter"},"Adding the OI4 Adapter"),(0,r.kt)("p",null,"Start by opening the ",(0,r.kt)("strong",{parentName:"p"},"Connect")," section in the StreamPipes UI. From the list of available adapters, choose the ",(0,r.kt)("strong",{parentName:"p"},"OI4 MQTT Adapter"),".\nThis adapter is purpose-built for consuming OI4-compliant MQTT streams, so it comes with built-in support for schema detection and mapping."),(0,r.kt)("img",{src:"/img/blog/2025-06-11/03-Connect.png",alt:"OI4 adapter in connect"}),(0,r.kt)("h3",{id:"configuring-the-adapter"},"Configuring the Adapter"),(0,r.kt)("p",null,"In the configuration screen, specify the connection to your MQTT broker. For this use case, the broker runs at ",(0,r.kt)("inlineCode",{parentName:"p"},"tcp://192.168.188.73:1883"),", with unauthenticated access. Select the desired sensor type (",(0,r.kt)("inlineCode",{parentName:"p"},"VVB001"),") and confirm that all available sensors should be included."),(0,r.kt)("p",null,"You\u2019ll also need to enter the App ID that identifies the publishing application\u2014in this case, ",(0,r.kt)("inlineCode",{parentName:"p"},"hilscher.com/.../netfield-app-opc-ua-io-link-adapter-1"),". Once configured, click ",(0,r.kt)("em",{parentName:"p"},"Next"),", and StreamPipes will automatically detect the event schema based on the live payloads from the broker."),(0,r.kt)("img",{src:"/img/blog/2025-06-11/04-Configuration-OI4-adapter.png",alt:"Configuration of OI4 adapter"}),(0,r.kt)("h2",{id:"deep-dive-vvb001-vibration-sensor-data"},"Deep Dive: VVB001 Vibration Sensor Data"),(0,r.kt)("p",null,"The VVB001 sensor is an IO-Link-enabled device capable of measuring several key vibration and temperature metrics.\nThese metrics are essential for detecting imbalances, misalignments, and early-stage mechanical wear in rotating equipment."),(0,r.kt)("h3",{id:"key-metrics-explained"},"Key Metrics Explained"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"strong"},"vRMS")," (Velocity RMS)"),": Indicates the effective vibration velocity over time. Higher values suggest increasing mechanical stress or imbalance."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"strong"},"aPeak")," (Acceleration Peak)"),": Captures the maximum acceleration value in a sampling window. Sudden spikes may point to impacts or misalignment."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"strong"},"aRMS")," (Acceleration RMS)"),": Reflects consistent vibration intensity. Useful for trend analysis and baseline monitoring."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"strong"},"Crest Factor")),": Calculated as the ratio between peak and RMS acceleration. A rising Crest Factor often signals early-stage bearing damage."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"strong"},"Temperature")),": Measures the internal temperature of the sensor or its surroundings\u2014crucial for thermal condition monitoring.")),(0,r.kt)("h3",{id:"sample-json-payload"},"Sample JSON Payload"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "Temperature": 37.9,\n  "sensorId": "000008740649",\n  "Crest": 4,\n  "vRms": 0,\n  "aRms": 0,\n  "aPeak": 0.2,\n  "timestamp": 1600599689805\n}\n')),(0,r.kt)("h3",{id:"preprocessing-in-streampipes"},"Preprocessing in StreamPipes"),(0,r.kt)("p",null,"Before this data can be used for analytics or alerting, it must be scaled and cleaned. For example:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"vRMS")," values need to be multiplied by ",(0,r.kt)("strong",{parentName:"li"},"0.0001"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"aPeak"),", ",(0,r.kt)("inlineCode",{parentName:"li"},"aRMS"),", ",(0,r.kt)("inlineCode",{parentName:"li"},"Temperature"),", and ",(0,r.kt)("inlineCode",{parentName:"li"},"Crest")," values are scaled by ",(0,r.kt)("strong",{parentName:"li"},"0.1"),".")),(0,r.kt)("p",null,"The StreamPipes connect functionality van handle this effortlessly.\nYou can edit the event schema to apply scaling and remove unused fields."),(0,r.kt)("img",{src:"/img/blog/2025-06-11/05-Event-Schema.png",alt:"Configuration of OI4 adapter"}),(0,r.kt)("h2",{id:"visual-data-exploration"},"Visual Data Exploration"),(0,r.kt)("p",null,"Once the data is flowing, you can use the ",(0,r.kt)("strong",{parentName:"p"},"Data Explorer")," in StreamPipes to monitor sensor metrics in real-time. Line charts help you visualize trends, spikes, and anomalies in vibration and temperature levels."),(0,r.kt)("p",null,"Whether you\u2019re fine-tuning processing logic or monitoring asset health, StreamPipes visualizations make it easy to detect anomalies and trends in real time."),(0,r.kt)("img",{src:"/img/blog/2025-06-11/06-Linechart.png",alt:"Configuration of OI4 adapter",style:{width:"70%",display:"block",margin:"0 auto"}}),(0,r.kt)("h2",{id:"alerting-with-pipelines"},"Alerting with Pipelines"),(0,r.kt)("p",null,"With pipelines, you can define rule-based logic to trigger alerts based on sensor values. For example, if the ",(0,r.kt)("strong",{parentName:"p"},"Crest Factor")," exceeds a defined threshold, you can send an email notification to maintenance staff."),(0,r.kt)("p",null,"Pipelines are extensible\u2014you can integrate third party tools, store data in databases, or implement predictive analytics using machine learning models."),(0,r.kt)("img",{src:"/img/blog/2025-06-11/07-Notification-Pipeline.png",alt:"Configuration of OI4 adapter",style:{width:"50%",display:"block",margin:"0 auto"}}),(0,r.kt)("h2",{id:"conclusion"},"Conclusion"),(0,r.kt)("p",null,"Apache StreamPipes and IO-Link together offer a highly accessible yet powerful IIoT solution.\nFrom a simple dashboard setup to complex, multi-sensor condition monitoring pipelines, this integration enables IT teams to drive real-time insights from machine data\u2014without needing a background in industrial automation."))}g.isMDXComponent=!0}}]);