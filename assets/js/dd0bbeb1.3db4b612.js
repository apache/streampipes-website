"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[62367],{3905:(e,t,r)=>{r.d(t,{Zo:()=>u,kt:()=>v});var n=r(67294);function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var l=n.createContext({}),p=function(e){var t=n.useContext(l),r=t;return e&&(r="function"==typeof e?e(t):i(i({},t),e)),r},u=function(e){var t=p(e.components);return n.createElement(l.Provider,{value:t},e.children)},c="mdxType",m={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},h=n.forwardRef((function(e,t){var r=e.components,a=e.mdxType,o=e.originalType,l=e.parentName,u=s(e,["components","mdxType","originalType","parentName"]),c=p(r),h=a,v=c["".concat(l,".").concat(h)]||c[h]||m[h]||o;return r?n.createElement(v,i(i({ref:t},u),{},{components:r})):n.createElement(v,i({ref:t},u))}));function v(e,t){var r=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=r.length,i=new Array(o);i[0]=h;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[c]="string"==typeof e?e:a,i[1]=s;for(var p=2;p<o;p++)i[p]=r[p];return n.createElement.apply(null,i)}return n.createElement.apply(null,r)}h.displayName="MDXCreateElement"},61289:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>u,contentTitle:()=>l,default:()=>v,frontMatter:()=>s,metadata:()=>p,toc:()=>c});var n=r(87462),a=r(63366),o=(r(67294),r(3905)),i=["components"],s={title:"How to Use the JavaScript Evaluator Processor",author:"Philipp Zehnder",authorURL:"https://github.com/tenthe",authorImageURL:"/img/zehnder.png"},l="How to Use the JavaScript Evaluator Processor",p={permalink:"/blog/2025/04/09/javascript-processor",source:"@site/blog/2025-04-09-javascript-processor.md",title:"How to Use the JavaScript Evaluator Processor",description:"Have a use case where none of the existing processors fit?",date:"2025-04-09T00:00:00.000Z",formattedDate:"April 9, 2025",tags:[],readingTime:3.245,hasTruncateMarker:!1,authors:[{name:"Philipp Zehnder",url:"https://github.com/tenthe",imageURL:"/img/zehnder.png"}],frontMatter:{title:"How to Use the JavaScript Evaluator Processor",author:"Philipp Zehnder",authorURL:"https://github.com/tenthe",authorImageURL:"/img/zehnder.png"},prevItem:{title:"Bringing LLM Power to Every Pipeline \u2013 The Multi-Model Prompt Processor",permalink:"/blog/2025/04/28/prompt-processor"},nextItem:{title:"Explore StreamPipes with Data Simulators!",permalink:"/blog/2025/03/25/file-stream-adapter"}},u={authorsImageUrls:[void 0]},c=[{value:"What is the JavaScript Evaluator?",id:"what-is-the-javascript-evaluator",level:2},{value:"Configuring the JavaScript Processor",id:"configuring-the-javascript-processor",level:2},{value:"Example 1: Stateless Event Transformation",id:"example-1-stateless-event-transformation",level:2},{value:"Example 2: Custom Event Filtering",id:"example-2-custom-event-filtering",level:2},{value:"Example 3: Stateful Logic",id:"example-3-stateful-logic",level:2},{value:"Wrap-Up",id:"wrap-up",level:2}],m={toc:c},h="wrapper";function v(e){var t=e.components,r=(0,a.Z)(e,i);return(0,o.kt)(h,(0,n.Z)({},m,r,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Have a use case where none of the existing processors fit?"),(0,o.kt)("br",{parentName:"p"}),"\n","Don\u2019t worry\u2014we\u2019ve got just the thing for you."),(0,o.kt)("p",null,"The ",(0,o.kt)("strong",{parentName:"p"},"JavaScript Evaluator Processor")," in Apache StreamPipes allows you to define custom event logic with just a few lines of JavaScript. Whether you want to modify values, filter events, or even add stateful logic, this processor empowers you to do just that\u2014without writing a full processing element in Java."),(0,o.kt)("p",null,"Let\u2019s take a closer look at how it works, what the configuration options are, and how you can use it in three different ways."),(0,o.kt)("h2",{id:"what-is-the-javascript-evaluator"},"What is the JavaScript Evaluator?"),(0,o.kt)("p",null,"Sometimes you need to apply custom logic to your data stream. Maybe it's a quick transformation or a complex filter that isn\u2019t supported out of the box. The JavaScript Evaluator Processor is designed exactly for these cases."),(0,o.kt)("p",null,"With a simple JavaScript function, you can:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Modify existing fields"),(0,o.kt)("li",{parentName:"ul"},"Add new fields"),(0,o.kt)("li",{parentName:"ul"},"Filter out unwanted events"),(0,o.kt)("li",{parentName:"ul"},"Maintain state across events")),(0,o.kt)("p",null,"All you need is a little coding and a bit of creativity."),(0,o.kt)("h2",{id:"configuring-the-javascript-processor"},"Configuring the JavaScript Processor"),(0,o.kt)("p",null,"When adding the JavaScript Evaluator to your pipeline, you\u2019ll notice two key configuration sections:"),(0,o.kt)("img",{src:"/img/blog/2025-04-09/javascript-processor-pipeline.png",alt:"Javascript Processor in Pipeline"}),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("strong",{parentName:"li"},"The JavaScript Function"),(0,o.kt)("br",{parentName:"li"}),"This function is triggered once for ",(0,o.kt)("em",{parentName:"li"},"each incoming event"),".")),(0,o.kt)("img",{src:"/img/blog/2025-04-09/javascript-processor-code.png",alt:"Javascript Processor Code Editor"}),(0,o.kt)("ol",{start:2},(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("strong",{parentName:"li"},"The Output Schema"),(0,o.kt)("br",{parentName:"li"}),"This defines the structure of your transformed events. It\u2019s important to ensure that the output schema matches what your function returns\u2014otherwise, downstream processors might not be able to validate the events correctly.")),(0,o.kt)("img",{src:"/img/blog/2025-04-09/javascript-processor-event-schema.png",alt:"Javascript Processor Event Schema Editor"}),(0,o.kt)("p",null,"Let\u2019s explore some examples that show different ways to apply custom logic to your event streams using JavaScript."),(0,o.kt)("h2",{id:"example-1-stateless-event-transformation"},"Example 1: Stateless Event Transformation"),(0,o.kt)("p",null,"The simplest use case is when you want to modify values in an event."),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Use case:")," You want to halve the ",(0,o.kt)("inlineCode",{parentName:"p"},"temperature")," value of each incoming event."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-javascript"},"function process(event) {\n    event.temperature = event.temperature / 2;\n    return event;\n}\n")),(0,o.kt)("p",null,"That\u2019s it! Each event passes through this function, gets modified, and is sent on its way. No extra setup needed."),(0,o.kt)("h2",{id:"example-2-custom-event-filtering"},"Example 2: Custom Event Filtering"),(0,o.kt)("p",null,"You don\u2019t always want to forward every event. The JavaScript Evaluator lets you return ",(0,o.kt)("inlineCode",{parentName:"p"},"null")," (or just omit ",(0,o.kt)("inlineCode",{parentName:"p"},"return"),") to drop an event."),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Use case:")," Only forward events where the ",(0,o.kt)("inlineCode",{parentName:"p"},"temperature")," is between 50 and 100."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-javascript"},"function process(event) {\n    if (event.temperature > 50 && event.temperature < 100) {\n        return event;\n    }\n}\n")),(0,o.kt)("p",null,'With this setup, only "valid" events get through. All others are silently ignored. Perfect for quick, custom filtering logic.'),(0,o.kt)("h2",{id:"example-3-stateful-logic"},"Example 3: Stateful Logic"),(0,o.kt)("p",null,"Need to track information across multiple events? You can wrap your function in an ",(0,o.kt)("strong",{parentName:"p"},"Immediately Invoked Function Expression (IIFE)")," to create persistent variables."),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Use case:")," Count how many events have passed through the processor and append that number to each event."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-javascript"},"(() => {\n    let count = 0;\n\n    return function process(event) {\n        count += 1;\n        event.count = count;\n        return event;\n    };\n})()\n")),(0,o.kt)("p",null,"This small trick makes it easy to introduce state without needing any external dependencies or full-blown processor development. You can track counts, store intermediate values, or even implement basic alerting.\nJust make sure that any new properties you add to the event, like ",(0,o.kt)("inlineCode",{parentName:"p"},"count")," in the example, are also included in the output event schema during processor configuration, otherwise the pipeline may fail validation."),(0,o.kt)("h2",{id:"wrap-up"},"Wrap-Up"),(0,o.kt)("p",null,"The JavaScript Evaluator is one of the most flexible processors in StreamPipes. Whether you're a beginner or a power user, it lets you:"),(0,o.kt)("p",null,"\u2705 Write custom transformations",(0,o.kt)("br",{parentName:"p"}),"\n","\u2705 Implement simple filters",(0,o.kt)("br",{parentName:"p"}),"\n","\u2705 Track state between events",(0,o.kt)("br",{parentName:"p"}),"\n","\u2705 Prototype complex logic\u2014without deploying a new microservice"),(0,o.kt)("p",null,"So, next time you think ",(0,o.kt)("em",{parentName:"p"},'"I wish there was a processor that could..."'),", just try the JavaScript Evaluator. Chances are, it can."),(0,o.kt)("p",null,"Got a cool use case using this processor? Let us know or share it with the community\u2014we\u2019d love to see what you\u2019re building with Apache StreamPipes!"))}v.isMDXComponent=!0}}]);