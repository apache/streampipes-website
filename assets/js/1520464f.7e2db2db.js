"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[41103],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>g});var r=n(67294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var l=r.createContext({}),p=function(e){var t=r.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},c=function(e){var t=p(e.components);return r.createElement(l.Provider,{value:t},e.children)},m="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},d=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,s=e.originalType,l=e.parentName,c=o(e,["components","mdxType","originalType","parentName"]),m=p(n),d=a,g=m["".concat(l,".").concat(d)]||m[d]||u[d]||s;return n?r.createElement(g,i(i({ref:t},c),{},{components:n})):r.createElement(g,i({ref:t},c))}));function g(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var s=n.length,i=new Array(s);i[0]=d;var o={};for(var l in t)hasOwnProperty.call(t,l)&&(o[l]=t[l]);o.originalType=e,o[m]="string"==typeof e?e:a,i[1]=o;for(var p=2;p<s;p++)i[p]=n[p];return r.createElement.apply(null,i)}return r.createElement.apply(null,n)}d.displayName="MDXCreateElement"},43855:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>l,default:()=>g,frontMatter:()=>o,metadata:()=>p,toc:()=>m});var r=n(87462),a=n(63366),s=(n(67294),n(3905)),i=["components"],o={id:"technicals-messaging",title:"Messaging",sidebar_label:"Messaging"},l=void 0,p={unversionedId:"technicals-messaging",id:"version-0.95.0/technicals-messaging",title:"Messaging",description:"Architecture",source:"@site/versioned_docs/version-0.95.0/07_technicals-messaging.md",sourceDirName:".",slug:"/technicals-messaging",permalink:"/docs/technicals-messaging",draft:!1,tags:[],version:"0.95.0",lastUpdatedBy:"Dominik Riemer",lastUpdatedAt:1718285506,formattedLastUpdatedAt:"Jun 13, 2024",sidebarPosition:7,frontMatter:{id:"technicals-messaging",title:"Messaging",sidebar_label:"Messaging"},sidebar:"documentation",previous:{title:"Runtime Wrappers",permalink:"/docs/technicals-runtime-wrappers"},next:{title:"Get Help",permalink:"/docs/community-get-help"}},c={},m=[{value:"Architecture",id:"architecture",level:2},{value:"Supported messaging systems",id:"supported-messaging-systems",level:2},{value:"Configure StreamPipes to use another messaging system",id:"configure-streampipes-to-use-another-messaging-system",level:2},{value:"Configure broker addresses",id:"configure-broker-addresses",level:3}],u={toc:m},d="wrapper";function g(e){var t=e.components,n=(0,a.Z)(e,i);return(0,s.kt)(d,(0,r.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,s.kt)("h2",{id:"architecture"},"Architecture"),(0,s.kt)("p",null,"To exchange messages at runtime between individual ",(0,s.kt)("a",{parentName:"p",href:"/docs/technicals-architecture"},"Extensions Services"),", StreamPipes uses external messaging systems.\nThis corresponds to an event-driven architecture with a central message broker and decoupled services which consume and produce events from the messaging system."),(0,s.kt)("p",null,"There are many different open source messaging systems on the market, which each have individual strengths.\nTo provide a flexible system which matches different needs, StreamPipes can be configured to use various messaging systems."),(0,s.kt)("h2",{id:"supported-messaging-systems"},"Supported messaging systems"),(0,s.kt)("p",null,"The following messaging systems are currently supported:"),(0,s.kt)("ul",null,(0,s.kt)("li",{parentName:"ul"},"Apache Kafka"),(0,s.kt)("li",{parentName:"ul"},"Apache Pulsar"),(0,s.kt)("li",{parentName:"ul"},"MQTT"),(0,s.kt)("li",{parentName:"ul"},"NATS")),(0,s.kt)("h2",{id:"configure-streampipes-to-use-another-messaging-system"},"Configure StreamPipes to use another messaging system"),(0,s.kt)("p",null,"Configuring StreamPipes for one of these messaging system is an installation-time configuration.\nWe currently do not recommend to change the configuration at runtime."),(0,s.kt)("p",null,"The protocol can be configured with the environment variable ",(0,s.kt)("inlineCode",{parentName:"p"},"SP_PRIORITIZED_PROTOCOL")," assigned to the core with one of the following values:"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-bash"},"SP_PRIORITIZED_PROTOCOL=kafka # Use Kafka as protocol\nSP_PRIORITIZED_PROTOCOL=pulsar # Use Pulsar as protocol\nSP_PRIORITIZED_PROTOCOL=mqtt # Use MQTT as protocol\nSP_PRIORITIZED_PROTOCOL=nats # Use NATS as protocol\n")),(0,s.kt)("p",null,"Note that each extension service can support an arbitrary number of protocols. For instance, you can have a lightweight extension service which only supports NATS, but have another, cloud-centered service which supports Kafka, both registered at the Core.\nTo select a protocol when multiple protocols are supported by two pipeline elements, StreamPipes selects a protocol based on a priority, which can be configured in the ",(0,s.kt)("a",{parentName:"p",href:"/docs/use-configurations"},"Configuration View"),".\nStreamPipes ensures that only pipeline elements which have a commonly supported protocol can be connected."),(0,s.kt)("p",null,"Note that you might need to change the installation files. For the ",(0,s.kt)("inlineCode",{parentName:"p"},"Docker-Compose")," based installation, we provide various compose file for different messaging setups. For the ",(0,s.kt)("inlineCode",{parentName:"p"},"Kubernetes")," installation, we provide variables which can be set in the helm chart's ",(0,s.kt)("inlineCode",{parentName:"p"},"values.yaml")," file."),(0,s.kt)("h3",{id:"configure-broker-addresses"},"Configure broker addresses"),(0,s.kt)("p",null,"By default, StreamPipes assumes that the messaging system is started from its own environment, e.g., the system configured in the selected ",(0,s.kt)("inlineCode",{parentName:"p"},"Docker-Compose")," file."),(0,s.kt)("p",null,"Besides that, it is also possible to let StreamPipes connect to an externally provided messaging system. For this purpose, various environment variables exist."),(0,s.kt)("ul",null,(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("p",{parentName:"li"},(0,s.kt)("inlineCode",{parentName:"p"},"SP_PRIORITIZED_PROTOCOL")," to set the prioritized protocol to either ",(0,s.kt)("inlineCode",{parentName:"p"},"kafka"),", ",(0,s.kt)("inlineCode",{parentName:"p"},"mqtt"),", ",(0,s.kt)("inlineCode",{parentName:"p"},"nats")," or ",(0,s.kt)("inlineCode",{parentName:"p"},"pulsar"))),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("p",{parentName:"li"},(0,s.kt)("inlineCode",{parentName:"p"},"SP_KAFKA_HOST"),", ",(0,s.kt)("inlineCode",{parentName:"p"},"SP_KAFKA_PORT")," to configure Kafka access")),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("p",{parentName:"li"},(0,s.kt)("inlineCode",{parentName:"p"},"SP_MQTT_HOST"),", ",(0,s.kt)("inlineCode",{parentName:"p"},"SP_MQTT_PORT")," to configure MQTT access")),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("p",{parentName:"li"},(0,s.kt)("inlineCode",{parentName:"p"},"SP_NATS_HOST"),", ",(0,s.kt)("inlineCode",{parentName:"p"},"SP_NATS_PORT")," to configure NATS access")),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("p",{parentName:"li"},(0,s.kt)("inlineCode",{parentName:"p"},"SP_PULSAR_URL")," to configure Pulsar access"))),(0,s.kt)("p",null,"Most settings can also be set in the UI under ",(0,s.kt)("inlineCode",{parentName:"p"},"Settings->Messaging"),"."),(0,s.kt)("admonition",{title:"Installation-time configurations",type:"warning"},(0,s.kt)("p",{parentName:"admonition"},"Although it is currently possible to change messaging settings in the user interface, we do not support dynamic modification of messaging systems.\nChoosing a proper system is considered an installation-time setting which should not be changed afterwards.\nAlready existing Adapters and pipeline elements are not properly updated after changes of the messaging layer.")))}g.isMDXComponent=!0}}]);