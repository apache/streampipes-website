"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[40982],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>k});var r=n(67294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var s=r.createContext({}),c=function(e){var t=r.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},p=function(e){var t=c(e.components);return r.createElement(s.Provider,{value:t},e.children)},u="mdxType",m={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},d=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,i=e.originalType,s=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),u=c(n),d=a,k=u["".concat(s,".").concat(d)]||u[d]||m[d]||i;return n?r.createElement(k,o(o({ref:t},p),{},{components:n})):r.createElement(k,o({ref:t},p))}));function k(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var i=n.length,o=new Array(i);o[0]=d;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l[u]="string"==typeof e?e:a,o[1]=l;for(var c=2;c<i;c++)o[c]=n[c];return r.createElement.apply(null,o)}return r.createElement.apply(null,n)}d.displayName="MDXCreateElement"},19724:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>p,contentTitle:()=>s,default:()=>k,frontMatter:()=>l,metadata:()=>c,toc:()=>u});var r=n(87462),a=n(63366),i=(n(67294),n(3905)),o=["components"],l={id:"connect-mqtt",title:"MQTT",sidebar_label:"MQTT"},s=void 0,c={unversionedId:"connect-mqtt",id:"connect-mqtt",title:"MQTT",description:"This document provides an overview of the MQTT connection and security configuration options available in StreamPipes. It covers how to configure broker connections, authentication modes, and TLS/SSL security settings \u2014 including guidance on keystore and truststore management for secure communication.",source:"@site/../docs/07_connect_mqtt.md",sourceDirName:".",slug:"/connect-mqtt",permalink:"/docs/next/connect-mqtt",draft:!1,tags:[],version:"current",lastUpdatedBy:"Jacqueline H\xf6llig",lastUpdatedAt:1765811331,formattedLastUpdatedAt:"Dec 15, 2025",sidebarPosition:7,frontMatter:{id:"connect-mqtt",title:"MQTT",sidebar_label:"MQTT"},sidebar:"documentation",previous:{title:"UI customization",permalink:"/docs/next/extend-customize-ui"},next:{title:"Architecture",permalink:"/docs/next/technicals-architecture"}},p={},u=[{value:"Notes on MQTT Settings",id:"notes-on-mqtt-settings",level:2},{value:"TLS Configuration",id:"tls-configuration",level:2},{value:"Security Configuration",id:"security-configuration",level:2}],m={toc:u},d="wrapper";function k(e){var t=e.components,n=(0,a.Z)(e,o);return(0,i.kt)(d,(0,r.Z)({},m,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"This document provides an overview of the MQTT connection and security configuration options available in StreamPipes. It covers how to configure broker connections, authentication modes, and TLS/SSL security settings \u2014 including guidance on keystore and truststore management for secure communication."),(0,i.kt)("h2",{id:"notes-on-mqtt-settings"},"Notes on MQTT Settings"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("strong",{parentName:"p"},"Broker URL")," : The URL of the MQTT broker. Specify the protocol and port, for example:"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"tcp://test-server.com:1883")," \u2014 for unencrypted connections")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"ssl://test-server.com:8883")," \u2014 for secure (TLS) connections"),(0,i.kt)("p",{parentName:"li"},"Both the protocol (tcp:// or ssl://) and port number are required.")))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("strong",{parentName:"p"},"Access Mode"),": Choose between:"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Unauthenticated"),": No authentication required, can be used with or without TLS "),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Username/Password"),": Basic authentication with username and password, can be used with or without TLS ",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Username"),": The username for authentication"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Password"),": The password for authentication"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Client Certificate")," : Requires TLS to be enabled. Authentication is performed using a client certificate.",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Certificate PEM"),": Public Key in PEM format"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Private Key PEM"),": Private (RSA) Key in PEM format (without password !)")))))),(0,i.kt)("h2",{id:"tls-configuration"},"TLS Configuration"),(0,i.kt)("p",null,"To enable TLS successfully, the MQTT broker\u2019s server certificate must be trusted by the Java Trust Store. If the certificate is ",(0,i.kt)("strong",{parentName:"p"},"self-signed")," or issued by a ",(0,i.kt)("strong",{parentName:"p"},"certificate authority not trusted by the Java Trust Store"),", one of the following options must be used:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("strong",{parentName:"p"},"Allow self-signed certificates"),": Set ",(0,i.kt)("inlineCode",{parentName:"p"},"SP_SECURITY_ALLOW_SELFSIGNED=true")," to permit connections using self-signed certificates."),(0,i.kt)("p",{parentName:"li"},"  \u26a0\ufe0f Use this only in development or testing environments, as it reduces certificate validation security.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("strong",{parentName:"p"},"Provide a custom keystore"),": Provide a keystore containing the MQTT server\u2019s certificate by setting the environment variable:"),(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"SP_SECURITY_KEYSTORE_FILENAME=/path/to/keystore.pfx\n")),(0,i.kt)("p",{parentName:"li"},"  Depending on your keystore setup, additional environment variables may also be required, such as:"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"SP_SECURITY_KEYSTORE_PASSWORD"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"SP_SECURITY_KEYSTORE_TYPE")))))),(0,i.kt)("p",null,"See the Security Configuration section below for more details."),(0,i.kt)("h2",{id:"security-configuration"},"Security Configuration"),(0,i.kt)("p",null,"Depending on the desired security level .env variables need to be set."),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"Env Variable Name"),(0,i.kt)("th",{parentName:"tr",align:null},"Default Value"),(0,i.kt)("th",{parentName:"tr",align:null},"Description"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"SP_SECURITY_KEYSTORE_FILENAME"),(0,i.kt)("td",{parentName:"tr",align:null},"/streampipes-security/keystore.pfx"),(0,i.kt)("td",{parentName:"tr",align:null},"The file path to the keystore containing the application's private keys and certificates used for TLS/SSL communication.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"SP_SECURITY_KEYSTORE_PASSWORD"),(0,i.kt)("td",{parentName:"tr",align:null}),(0,i.kt)("td",{parentName:"tr",align:null},"The password used to unlock and access the keystore file. This value must match the password set when the keystore was created.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"SP_SECURITY_KEYSTORE_TYPE"),(0,i.kt)("td",{parentName:"tr",align:null},'"PKCS12"'),(0,i.kt)("td",{parentName:"tr",align:null},"The format or type of the keystore (e.g., PKCS12, JKS). Determines how keys and certificates are stored and accessed.Keystore.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"SP_SECURITY_KEY_PASSWORD"),(0,i.kt)("td",{parentName:"tr",align:null}),(0,i.kt)("td",{parentName:"tr",align:null},"The password for the specific private key within the keystore. Required if the key is protected by a different password than the keystore itself.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"SP_SECURITY_TRUSTSTORE_FILENAME"),(0,i.kt)("td",{parentName:"tr",align:null},"/streampipes-security/truststore.pfx"),(0,i.kt)("td",{parentName:"tr",align:null},"The file path to the truststore containing trusted CA certificates used to verify external TLS connections.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"SP_SECURITY_TRUSTSTORE_PASSWORD"),(0,i.kt)("td",{parentName:"tr",align:null}),(0,i.kt)("td",{parentName:"tr",align:null},"The password used to unlock and access the truststore file. This must match the password set when the truststore was created.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"SP_SECURITY_TRUSTSTORE_TYPE"),(0,i.kt)("td",{parentName:"tr",align:null},"PKCS12"),(0,i.kt)("td",{parentName:"tr",align:null},"The format or type of the truststore (e.g., PKCS12, JKS). Defines how trusted certificates are stored and managed.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"SP_SECURITY_ALLOW_SELFSIGNED"),(0,i.kt)("td",{parentName:"tr",align:null},"false"),(0,i.kt)("td",{parentName:"tr",align:null},"If set to true, allows TLS connections using self-signed certificates. Use only for testing or development environments, as it disables strict certificate validation and may reduce connection security.")))),(0,i.kt)("p",null,"If you do not want to accept all Selfsigned certificates (only specific ones), you will need to mount a truststore.\nA trustore from a certificate can be build by e.g,"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"# Create a keystore from the private key and certificate\nopenssl pkcs12 -export -in server-cert.pem -inkey server-key.pem -out server-keystore.p12 -name mqtt\n")))}k.isMDXComponent=!0}}]);