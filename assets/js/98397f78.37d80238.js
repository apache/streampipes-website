"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[89431],{3905:(e,t,a)=>{a.d(t,{Zo:()=>m,kt:()=>g});var n=a(67294);function i(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function r(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function l(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?r(Object(a),!0).forEach((function(t){i(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function o(e,t){if(null==e)return{};var a,n,i=function(e,t){if(null==e)return{};var a,n,i={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(i[a]=e[a]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}var p=n.createContext({}),s=function(e){var t=n.useContext(p),a=t;return e&&(a="function"==typeof e?e(t):l(l({},t),e)),a},m=function(e){var t=s(e.components);return n.createElement(p.Provider,{value:t},e.children)},u="mdxType",c={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},d=n.forwardRef((function(e,t){var a=e.components,i=e.mdxType,r=e.originalType,p=e.parentName,m=o(e,["components","mdxType","originalType","parentName"]),u=s(a),d=i,g=u["".concat(p,".").concat(d)]||u[d]||c[d]||r;return a?n.createElement(g,l(l({ref:t},m),{},{components:a})):n.createElement(g,l({ref:t},m))}));function g(e,t){var a=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var r=a.length,l=new Array(r);l[0]=d;var o={};for(var p in t)hasOwnProperty.call(t,p)&&(o[p]=t[p]);o.originalType=e,o[u]="string"==typeof e?e:i,l[1]=o;for(var s=2;s<r;s++)l[s]=a[s];return n.createElement.apply(null,l)}return n.createElement.apply(null,a)}d.displayName="MDXCreateElement"},88733:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>m,contentTitle:()=>p,default:()=>g,frontMatter:()=>o,metadata:()=>s,toc:()=>u});var n=a(87462),i=a(63366),r=(a(67294),a(3905)),l=["components"],o={title:"Usage-Based Maintenance with Apache StreamPipes",author:"Philipp Zehnder",authorURL:"https://github.com/tenthe",authorImageURL:"/img/zehnder.png"},p="Usage-Based Maintenance with Apache StreamPipes",s={permalink:"/blog/2025/04/30/usage-based-maintanence",source:"@site/blog/2025-04-30-usage-based-maintanence.md",title:"Usage-Based Maintenance with Apache StreamPipes",description:"Introduction",date:"2025-04-30T00:00:00.000Z",formattedDate:"April 30, 2025",tags:[],readingTime:4.645,hasTruncateMarker:!1,authors:[{name:"Philipp Zehnder",url:"https://github.com/tenthe",imageURL:"/img/zehnder.png"}],frontMatter:{title:"Usage-Based Maintenance with Apache StreamPipes",author:"Philipp Zehnder",authorURL:"https://github.com/tenthe",authorImageURL:"/img/zehnder.png"},prevItem:{title:"Secure OPC-UA Integration with Apache StreamPipes: A Comprehensive Guide",permalink:"/blog/2025/05/20/opc-ua-certificates"},nextItem:{title:"Bringing LLM Power to Every Pipeline \u2013 The Multi-Model Prompt Processor",permalink:"/blog/2025/04/28/prompt-processor"}},m={authorsImageUrls:[void 0]},u=[{value:"Introduction",id:"introduction",level:2},{value:"The Scenario: Packaging Machine Monitoring",id:"the-scenario-packaging-machine-monitoring",level:2},{value:"The Data: A Simple Boolean Signal",id:"the-data-a-simple-boolean-signal",level:2},{value:"Part 1: Absolute Counter with Notification",id:"part-1-absolute-counter-with-notification",level:2},{value:"Pipeline Overview",id:"pipeline-overview",level:3},{value:"Step-by-Step Guide",id:"step-by-step-guide",level:3},{value:"Part 2: Aggregated Counting Over Time",id:"part-2-aggregated-counting-over-time",level:2},{value:"A Time-Aggregated Approach",id:"a-time-aggregated-approach",level:3},{value:"Alternative Pipeline Using Signal Edge Filter",id:"alternative-pipeline-using-signal-edge-filter",level:3},{value:"Visualization in the Data Explorer",id:"visualization-in-the-data-explorer",level:2},{value:"Conclusion",id:"conclusion",level:2}],c={toc:u},d="wrapper";function g(e){var t=e.components,a=(0,i.Z)(e,l);return(0,r.kt)(d,(0,n.Z)({},c,a,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h2",{id:"introduction"},"Introduction"),(0,r.kt)("p",null,"In many manufacturing settings, maintenance is still scheduled at fixed time intervals \u2014 often based on past experience rather than actual machine usage.\nThis approach can lead to unnecessary servicing or, worse, unexpected breakdowns.\nA common limitation is that many machines, especially older ones, offer only minimal sensor data, making advanced maintenance strategies seem out of reach."),(0,r.kt)("p",null,"However, with Apache StreamPipes, even limited data \u2014 such as a simple boolean signal indicating activity \u2014 can be leveraged to implement usage-based maintenance.\nIn this blog post, we demonstrate how this is achieved using a real-world example: a packaging machine that processes goods at high throughput.\nYou'll learn how to count machine operations, store event data, visualize usage over time, and trigger notifications when maintenance is due \u2014 all with just a few clicks in StreamPipes."),(0,r.kt)("h2",{id:"the-scenario-packaging-machine-monitoring"},"The Scenario: Packaging Machine Monitoring"),(0,r.kt)("p",null,"Let\u2019s consider a packaging machine that wraps goods into individual packages.\nThe wear and tear on this machine is directly related to the number of items processed.\nHowever, due to the machine\u2019s age, only minimal data is available."),(0,r.kt)("p",null,"Currently:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Maintenance occurs at fixed intervals."),(0,r.kt)("li",{parentName:"ul"},"These intervals were determined on the basis of the technicians' experience."),(0,r.kt)("li",{parentName:"ul"},"There is suspicion that maintenance is done too frequently, leading to unnecessary costs.")),(0,r.kt)("p",null,"With Apache StreamPipes, we\u2019ll build a pipeline that:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Counts packaging operations in real time."),(0,r.kt)("li",{parentName:"ul"},"Stores data for analysis and visualization."),(0,r.kt)("li",{parentName:"ul"},"Sends notifications once a maintenance threshold is reached.")),(0,r.kt)("h2",{id:"the-data-a-simple-boolean-signal"},"The Data: A Simple Boolean Signal"),(0,r.kt)("p",null,"The machine provides a boolean flag \u2014 ",(0,r.kt)("inlineCode",{parentName:"p"},"active")," \u2014 which is ",(0,r.kt)("inlineCode",{parentName:"p"},"true")," when a packaging operation occurs.\nThis flag is streamed using an Apache StreamPipes S7 adapter. The stream also includes a few additional process parameters:"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Timestamp"),(0,r.kt)("th",{parentName:"tr",align:null},"active"),(0,r.kt)("th",{parentName:"tr",align:null},"..."))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"1719897720887"),(0,r.kt)("td",{parentName:"tr",align:null},"false"),(0,r.kt)("td",{parentName:"tr",align:null},"...")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"1719897721952"),(0,r.kt)("td",{parentName:"tr",align:null},"true"),(0,r.kt)("td",{parentName:"tr",align:null},"...")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"1719897722952"),(0,r.kt)("td",{parentName:"tr",align:null},"true"),(0,r.kt)("td",{parentName:"tr",align:null},"...")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"..."),(0,r.kt)("td",{parentName:"tr",align:null},"..."),(0,r.kt)("td",{parentName:"tr",align:null},"...")))),(0,r.kt)("h2",{id:"part-1-absolute-counter-with-notification"},"Part 1: Absolute Counter with Notification"),(0,r.kt)("p",null,"We\u2019ll begin by building a pipeline that counts how often the machine packages a product and sends an email alert when a predefined threshold is reached."),(0,r.kt)("h3",{id:"pipeline-overview"},"Pipeline Overview"),(0,r.kt)("img",{src:"/img/blog/2025-04-30/maintenance-pipeline-one.png",alt:"Counting Operations Pipeline"}),(0,r.kt)("p",null,(0,r.kt)("em",{parentName:"p"},"A simple StreamPipes pipeline for monitoring the parts produced at the machine")),(0,r.kt)("h3",{id:"step-by-step-guide"},"Step-by-Step Guide"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"Add the Data Source")),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Drag the data stream of the packaging machine into the pipeline editor."))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"Insert the ",(0,r.kt)("inlineCode",{parentName:"strong"},"Boolean Counter")," Processor")),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Monitors a boolean field and counts transitions (e.g., ",(0,r.kt)("inlineCode",{parentName:"li"},"false \u2192 true"),")."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Configuration:"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("em",{parentName:"li"},"Boolean Field:")," ",(0,r.kt)("inlineCode",{parentName:"li"},"active")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("em",{parentName:"li"},"Flank Parameter:")," ",(0,r.kt)("inlineCode",{parentName:"li"},"FALSE \u2192 TRUE"))))),(0,r.kt)("blockquote",{parentName:"li"},(0,r.kt)("p",{parentName:"blockquote"},"The processor emits a new event each time the machine packages an item, incrementing a ",(0,r.kt)("inlineCode",{parentName:"p"},"counter")," value."))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"Persist the Count")),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Add the ",(0,r.kt)("strong",{parentName:"li"},"Data Lake")," sink to store these events for visualization."))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"Add a Threshold Alert")),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Insert the ",(0,r.kt)("inlineCode",{parentName:"li"},"Numerical Filter")," processor.",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("em",{parentName:"li"},"Field:")," ",(0,r.kt)("inlineCode",{parentName:"li"},"counter")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("em",{parentName:"li"},"Filter Operation:")," ",(0,r.kt)("inlineCode",{parentName:"li"},">")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("em",{parentName:"li"},"Threshold:")," ",(0,r.kt)("inlineCode",{parentName:"li"},"100000")))),(0,r.kt)("li",{parentName:"ul"},"Connect this to the ",(0,r.kt)("strong",{parentName:"li"},"Email Notification")," sink.",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Configure recipient, subject, and set the ",(0,r.kt)("strong",{parentName:"li"},"Silent Period")," to avoid spamming the team."))))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"Visualize in Dashboard")),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Start the pipeline."),(0,r.kt)("li",{parentName:"ul"},"In the dashboard, add an ",(0,r.kt)("strong",{parentName:"li"},"Indicator Widget")," displaying the ",(0,r.kt)("inlineCode",{parentName:"li"},"counter")," value.")))),(0,r.kt)("img",{src:"/img/blog/2025-04-30/maintenance-dashboard.png",alt:"Displaying the counting value"}),(0,r.kt)("p",null,(0,r.kt)("em",{parentName:"p"},"The live dashboard with an indicator chart showing the current number of goods produced")),(0,r.kt)("p",null,"This setup gives you a live counter of how many products were packaged and notifies the maintenance team when attention is needed."),(0,r.kt)("h2",{id:"part-2-aggregated-counting-over-time"},"Part 2: Aggregated Counting Over Time"),(0,r.kt)("p",null,"While a cumulative counter is useful, often it's more insightful to understand how usage varies over time \u2014 for example, how many items are processed each day."),(0,r.kt)("h3",{id:"a-time-aggregated-approach"},"A Time-Aggregated Approach"),(0,r.kt)("p",null,"Instead of a total counter, we\u2019ll now generate a single event for each packaging operation and then use the ",(0,r.kt)("strong",{parentName:"p"},"Data Explorer")," to visualize activity per hour or per day."),(0,r.kt)("h3",{id:"alternative-pipeline-using-signal-edge-filter"},"Alternative Pipeline Using Signal Edge Filter"),(0,r.kt)("img",{src:"/img/blog/2025-04-30/maintenance-pipeline-two.png",alt:"Count per Time Pipeline"}),(0,r.kt)("p",null,(0,r.kt)("em",{parentName:"p"},"Pipeline to recognize when a part is being processed")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Step-by-Step:")),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Replace the ",(0,r.kt)("inlineCode",{parentName:"p"},"Boolean Counter")," with a ",(0,r.kt)("strong",{parentName:"p"},"Signal Edge Filter")," processor."),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Filters events based on signal transitions."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Configuration:"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("em",{parentName:"li"},"Boolean Field:")," ",(0,r.kt)("inlineCode",{parentName:"li"},"active")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("em",{parentName:"li"},"Signal Edge:")," ",(0,r.kt)("inlineCode",{parentName:"li"},"FALSE \u2192 TRUE")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("em",{parentName:"li"},"Delay:")," ",(0,r.kt)("inlineCode",{parentName:"li"},"0")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("em",{parentName:"li"},"Output Event Selection:")," ",(0,r.kt)("inlineCode",{parentName:"li"},"First")))))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Store the filtered stream in the ",(0,r.kt)("strong",{parentName:"p"},"Data Lake")," sink. "))),(0,r.kt)("p",null,"This gives one clean event per packaging operation \u2014 ideal for aggregation."),(0,r.kt)("h2",{id:"visualization-in-the-data-explorer"},"Visualization in the Data Explorer"),(0,r.kt)("p",null,"Now that we have one event per packaging action, we can analyze the data over time in the Data Explorer."),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("strong",{parentName:"li"},"Open the Data Explorer")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("strong",{parentName:"li"},"Table View Configuration:"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("em",{parentName:"li"},"Data Source:")," Select the stream used in the pipeline."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("em",{parentName:"li"},"Aggregation:")," Group by ",(0,r.kt)("inlineCode",{parentName:"li"},"Hour")," or ",(0,r.kt)("inlineCode",{parentName:"li"},"Day"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("em",{parentName:"li"},"Field Aggregation:")," Use ",(0,r.kt)("inlineCode",{parentName:"li"},"count")," on any field to count the number of events.")))),(0,r.kt)("img",{src:"/img/blog/2025-04-30/maintenance-count-aggregation-table.png",alt:"Count per Time in Data Explorer"}),(0,r.kt)("ol",{start:3},(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("strong",{parentName:"li"},"Bar Chart Visualization:"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Switch to a ",(0,r.kt)("strong",{parentName:"li"},"Time-Series Chart"),"."),(0,r.kt)("li",{parentName:"ul"},"Select the counted field."),(0,r.kt)("li",{parentName:"ul"},"Choose ",(0,r.kt)("inlineCode",{parentName:"li"},"bar")," from the chart type dropdown.")))),(0,r.kt)("img",{src:"/img/blog/2025-04-30/maintenance-count-aggregation-barchart.png",alt:"Count per Time in Data Explorer Bar Chart"}),(0,r.kt)("p",null,"You now have a clear, time-based view of machine usage. This helps spot trends, detect unusual downtimes, and better plan maintenance."),(0,r.kt)("h2",{id:"conclusion"},"Conclusion"),(0,r.kt)("p",null,"In this post, we\u2019ve shown how even limited sensor data \u2014 like a simple boolean signal \u2014 can be used to build powerful maintenance logic using Apache StreamPipes. With just a few clicks, you can:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Count operations and trigger maintenance alerts"),(0,r.kt)("li",{parentName:"ul"},"Store and visualize historical data"),(0,r.kt)("li",{parentName:"ul"},"Understand machine usage over time with time-based aggregations")),(0,r.kt)("p",null,"By replacing static maintenance intervals with actual usage insights, you can reduce unnecessary work and improve efficiency \u2014 all without needing to retrofit expensive new sensors."))}g.isMDXComponent=!0}}]);